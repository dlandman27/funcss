<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover random fun websites and mini-games. A curated collection of interactive experiences, games, tools and more.">
    <meta name="keywords" content="random websites, mini games, web toys, interactive experiences">
    <meta name="author" content="Random Sites">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://randomsitesontheweb.com/">
    <meta property="og:title" content="Random Sites On The Web">
    <meta property="og:description" content="Discover random fun websites and mini-games. A curated collection of interactive experiences, games, tools and more.">
    <meta property="og:image" content="https://randomsitesontheweb.com/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://randomsitesontheweb.com/">
    <meta property="twitter:title" content="Random Sites On The Web">
    <meta property="twitter:description" content="Discover random fun websites and mini-games. A curated collection of interactive experiences, games, tools and more.">
    <meta property="twitter:image" content="https://randomsitesontheweb.com/og-image.jpg">

    <title>Random Sites On The Web - Discover Fun Random Websites</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'><path d='M21 3C11.6 3 4 10.6 4 20s7.6 17 17 17c3.9 0 7.5-1.3 10.3-3.5L42 44.2c1.2 1.2 3.1 1.2 4.2 0 1.2-1.2 1.2-3.1 0-4.2L35.5 29.3c2.2-2.8 3.5-6.4 3.5-10.3C39 10.6 31.4 3 22 3zm0 5c6.6 0 12 5.4 12 12s-5.4 12-12 12S9 26.6 9 20s5.4-12 12-12z' fill='%233498db'/></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'><path d='M21 3C11.6 3 4 10.6 4 20s7.6 17 17 17c3.9 0 7.5-1.3 10.3-3.5L42 44.2c1.2 1.2 3.1 1.2 4.2 0 1.2-1.2 1.2-3.1 0-4.2L35.5 29.3c2.2-2.8 3.5-6.4 3.5-10.3C39 10.6 31.4 3 22 3zm0 5c6.6 0 12 5.4 12 12s-5.4 12-12 12S9 26.6 9 20s5.4-12 12-12z' fill='%233498db'/></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            overflow-x: hidden;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        h2 {
            color: #3498db;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 2.2rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: floatText 3s ease-in-out infinite;
        }

        .dotcom-text {
            display: inline-block;
            color: #e74c3c;
            font-size: 0.9em;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
            animation: glowPulse 2s ease-in-out infinite;
            transform-origin: center;
        }

        @keyframes glowPulse {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
            }
            50% {
                transform: scale(1.1) rotate(5deg);
                text-shadow: 0 0 20px rgba(231, 76, 60, 0.8),
                            0 0 30px rgba(231, 76, 60, 0.6),
                            0 0 40px rgba(231, 76, 60, 0.4);
            }
        }

        @keyframes floatText {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 20px 40px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .container {
            text-align: center;
        }

        .icon-spin {
            font-size: 3rem;
            color: #3498db;
            margin-bottom: 2rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .loading {
            display: none;
            margin-top: 1rem;
        }

        .loading .dots {
            display: inline-block;
        }

        .loading .dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #3498db;
            border-radius: 50%;
            margin: 0 3px;
            animation: dots 1.4s infinite;
        }

        .loading .dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading .dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dots {
            0%, 100% { transform: scale(0.3); }
            50% { transform: scale(1); }
        }

        .follower {
            position: fixed;
            pointer-events: none;
            font-size: 40px;
            transition: transform 0.1s;
            z-index: 1000;
        }

        .trail {
            position: fixed;
            pointer-events: none;
            font-size: 30px;
            animation: fadeOut 1s forwards;
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1) rotate(0deg); }
            to { opacity: 0; transform: scale(0.2) rotate(360deg); }
        }

        .history-panel {
            position: fixed;
            right: 20px;
            top: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 80vh;
            overflow-y: auto;
            display: none;
        }

        .history-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 2.5rem;
            cursor: pointer;
            padding: 0.5rem;
            color: #333;
            transition: color 0.2s ease;
            box-shadow: none;
            line-height: 1;
        }

        .close-modal:hover {
            color: #3498db;
            transform: none;
            background: none;
        }

        .modal-header h3 {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 2rem;
        }

        .history-toggle {
            position: fixed;
            right: 20px;
            top: 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: transform 0.2s ease;
            padding: 12px;
            gap: 8px;
        }
        
        .history-toggle:hover {
            transform: scale(1.1);
        }
        
        .history-toggle:active {
            transform: scale(0.95);
        }

        .site-entry {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .favorite-btn {
            background: none;
            border: none;
            color: #ccc;
            padding: 5px;
            cursor: pointer;
        }

        .favorite-btn.active {
            color: gold;
        }

        .clear-cookies-toggle {
            right: 140px;
            margin-top: 3rem;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: transform 0.2s ease;
            padding: 12px;
            gap: 8px;
        }

        .clear-cookies-toggle:hover {
            transform: scale(1.1);
            background-color: #c0392b;
        }

        .clear-cookies-toggle:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="container">
        <i class="fas fa-compass icon-spin"></i>
        <h2>Random Sites On the Web <span class="dotcom-text">.com</span></h2>
        <h1>Go to a random site!</h1>
        <button onclick="getSites()">
            <i class="fas fa-random"></i>
            Take me somewhere random!
        </button>
        <div class="loading">
            Finding something cool<div class="dots">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>

    <button class="history-toggle" onclick="toggleHistoryModal()">
        <i class="fas fa-history"></i> History
    </button>

    <a href="/sites/index.html" class="history-toggle" style="right: 140px;">
        <i class="fas fa-sitemap"></i> Sites
    </a>

    <div class="history-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-history"></i> History</h3>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button class="close-modal" onclick="toggleHistoryModal()">×</button>
                </div>
            </div>
            <div id="visitedSites"></div>
            <button class="clear-cookies-toggle" onclick="clearAllData()">
                <i class="fas fa-cookie-bite"></i> Clear History
            </button>
        </div>
    </div>

    <script>
        const folders = [
            '/pi/',
            '/checkboxgrid/',
            '/drips/',
            '/infinitetictactoe/', 
            '/nameashape/',
            '/randomphotos/',
            '/randommazegenerator/',
            '/randomcolor/',
            '/eyesonme/',
            '/shakespeareinsultmaker/',
            '/writemeastory/',
            '/fractal/',
            '/dvd/',
            '/comicmoves/',
            '/whyamilate/',
            '/colorle/',
            '/magic8ball/',
            '/coolloaders/',
            '/unmotivationalquotes/',
            '/visitcounter/',
            '/hobbyfinder/',
            '/dontpressthebutton/',
            '/whatsmyresolution/',
        ];

        // Close modal when clicking outside of it
        document.querySelector('.history-modal').addEventListener('click', (e) => {
            if (e.target.classList.contains('history-modal')) {
                hideModal();
            }
        });

        function hideModal() {
            const modal = document.querySelector('.history-modal');
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
                modal.style.opacity = '1';
            }, 300);
        }

        function showModal() {
            const modal = document.querySelector('.history-modal');
            modal.style.opacity = '0';
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }

        function toggleHistoryModal() {
            const modal = document.querySelector('.history-modal');
            if (modal.style.display === 'flex') {
                hideModal();
            } else {
                showModal();
            }
        }

        // Add weights for each folder
        let weights = {};
        folders.forEach(folder => {
            // Initialize from localStorage or set to 1 if not found
            weights[folder] = parseFloat(localStorage.getItem(`weight_${folder}`)) || 1;
        });

        function getSites() {
            document.querySelector('.loading').style.display = 'block';
            try {
                // Calculate total weight
                const totalWeight = Object.values(weights).reduce((a, b) => a + b, 0);
                let random = Math.random() * totalWeight;
                
                // Select folder based on weights
                let selectedFolder;
                for (const folder of folders) {
                    random -= weights[folder];
                    if (random <= 0) {
                        selectedFolder = folder;
                        break;
                    }
                }
                
                // Reduce weight of selected folder
                weights[selectedFolder] *= 0.5; // Reduce by half each time
                localStorage.setItem(`weight_${selectedFolder}`, weights[selectedFolder].toString());
                
                saveSiteVisit(selectedFolder);
                window.open(window.location.origin + '/sites' + selectedFolder, '_blank');
            } finally {
                document.querySelector('.loading').style.display = 'none';
            }
        }

        // Add a reset function (optional - you can add a button for this if needed)
        function resetWeights() {
            folders.forEach(folder => {
                weights[folder] = 1;
                localStorage.setItem(`weight_${folder}`, '1');
            });
        }

        const emojis = ['🌈', '💫', '🎪', '🎠', '🎢', '🎡', '🦄', '🌟', '✨', '🎉'];
        const follower = document.createElement('div');
        follower.className = 'follower';
        document.body.appendChild(follower);

        document.addEventListener('mousemove', (e) => {
            // Update main follower
            follower.style.left = e.clientX + 'px';
            follower.style.top = e.clientY + 'px';
            follower.style.transform = `translate(-50%, -50%) rotate(${e.clientX + e.clientY}deg)`;

            // Create trail
            if (Math.random() > 0.5) {  // Only create trail 50% of the time
                const trail = document.createElement('div');
                trail.className = 'trail';
                trail.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                trail.style.transform = 'translate(-50%, -50%)';
                document.body.appendChild(trail);

                // Clean up trail after animation
                setTimeout(() => trail.remove(), 1000);
            }
        });

        // Make the title follow mouse with delay
        const title = document.querySelector('h1');
        document.addEventListener('mousemove', (e) => {
            setTimeout(() => {
                const x = (e.clientX - window.innerWidth / 2) / 20;
                const y = (e.clientY - window.innerHeight / 2) / 20;
                title.style.transform = `translate(${x}px, ${y}px) rotate(${x + y}deg)`;
            }, 100);
        });

        // Add these new functions
        function saveSiteVisit(folder) {
            // Fetch the page title from the opened site
            fetch(window.location.origin + '/sites' + folder + 'index.html')
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const title = doc.title || folder.replace(/\//g, '');
                    
                    let visited = JSON.parse(localStorage.getItem('visitedSites') || '[]');
                    const newSite = {
                        title: title,
                        path: folder,
                        timestamp: Date.now(),
                        favorite: false
                    };
                    
                    visited.unshift(newSite);
                    // Keep only last 50 visits
                    visited = visited.slice(0, 50);
                    localStorage.setItem('visitedSites', JSON.stringify(visited));
                    updateHistoryPanel();
                });
        }

        function updateHistoryPanel() {
            const visited = JSON.parse(localStorage.getItem('visitedSites') || '[]');
            const container = document.getElementById('visitedSites');
            container.innerHTML = '';

            visited.forEach(site => {
                const entry = document.createElement('div');
                entry.className = 'site-entry';
                
                const favBtn = document.createElement('button');
                favBtn.className = `favorite-btn ${site.favorite ? 'active' : ''}`;
                favBtn.innerHTML = '⭐';
                favBtn.onclick = () => toggleFavorite(site.path);

                const link = document.createElement('a');
                link.href = window.location.origin + '/sites' + site.path;
                link.target = '_blank';
                link.textContent = site.title;

                entry.appendChild(favBtn);
                entry.appendChild(link);
                container.appendChild(entry);
            });
        }

        function toggleFavorite(path) {
            const visited = JSON.parse(localStorage.getItem('visitedSites') || '[]');
            const site = visited.find(s => s.path === path);
            if (site) {
                site.favorite = !site.favorite;
                localStorage.setItem('visitedSites', JSON.stringify(visited));
                updateHistoryPanel();
            }
        }

        // Initialize history panel on load
        updateHistoryPanel();

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This will reset your history and weights.')) {
                // Clear visited sites
                localStorage.removeItem('visitedSites');
                
                // Reset weights
                resetWeights();
                
                // Update the history panel
                updateHistoryPanel();
                
                alert('All data has been cleared!');
            }
        }
    </script>
</body>
</html>